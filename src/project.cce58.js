window.__require=function t(e,i,n){function s(c,r){if(!i[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var u="function"==typeof __require&&__require;if(!r&&u)return u(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+c+"'")}}var h=i[c]={exports:{}};e[c][0].call(h.exports,function(t){return s(e[c][1][t]||t)},h,h.exports,t,e,i,n)}return i[c].exports}for(var o="function"==typeof __require&&__require,c=0;c<n.length;c++)s(n[c]);return s}({bird:[function(t,e,i){"use strict";cc._RF.push(e,"e1356RcAU9F7rKtxXv48XXo","bird"),cc.Class({extends:cc.Component,properties:{},ctor:function(){this.item={},this.monster={},this.type=-1},checkItem:function(t,e){var i=t-e,n=-1,s=Math.abs(i-this.item.delay)-50>0?Math.abs(i-this.item.delay)-50:0;return 0==s?n=0:s<=50?n=1:s<=100?n=2:s<=150?n=3:s<=300&&(n=4),this.item.type=n,n},pause:function(){this.node.pauseAllActions()},onClicked:function(){var t=this;this.node.stopAllActions();var e=cc.moveTo(1,this.item.center+200,1200);this.node.runAction(e,cc.callFunc(function(){t.monster.removeFromParent()}))},resume:function(t){this.item.delay+=t,this.node.resumeAllActions()},failed:function(){var t=this;cc.moveTo(2,800,0),cc.callFunc(function(){t.monster.removeFromParent()});this.monster.stopAllActions()},startMove:function(t){var e=this,i=(new Date).getTime()-t;this.item.delay=this.item.delay-i;var n=cc.moveTo(this.item.delay/1e3+70/this.speed,this.item.center-70,-44.25),s=cc.callFunc(function(){e.monster.removeFromParent(),window.game.gameFailed()});this.monster.runAction(cc.sequence(n,s))},update:function(t){cc.log(t)},init:function(t,e){this.speed=e;var i=t.delay;this.item=t;var n=e*i/1e3+t.center;this.node.x=n,this.node.y=-100,this.monster=this.node}}),cc._RF.pop()},{}],game:[function(t,e,i){"use strict";cc._RF.push(e,"25211DQqGdDh5VUQvE5ww02","game"),cc.Class({extends:cc.Component,properties:{tap:cc.Animation,touchBg:cc.Node,pause:cc.Node,progress:cc.Sprite,audioclip:cc.AudioClip,config:cc.JsonAsset,result:cc.Prefab,loading:cc.Animation,worm:cc.Animation,birds:[cc.Prefab],texts:[cc.Prefab]},ctor:function(){var t=this;this.startTime=0,this.itemList=[],this.pauseStartTime=0,this.isFinished=!0,this.score=0,this.resultNode=null,this.isStudying=!1,this.progressNum=0,this.needGuide=!0,window.game={refresh:function(){},stopGame:function(){},start:function(){},gameFailed:function(){t.isFinished=!0,t.worm.play("wormfailed"),t.gameFailed()}}},start:function(){var t=this;this.loading.on("finished",function(){setTimeout(function(){t.createItem(),setTimeout(function(){t.startMove()},100)},100)})},onLoad:function(){var t=this;this.progress.node.width=0,this.touchBg.on("touchstart",function(){t.isStudying||t.onClicked()}),this.pause.on("touchstart",function(){t.onPause()}),this.needGuide?(this.isStudying=!0,this.pause.active=!1):this.isStudying=!1},guide:function(){},onClicked:function(){var t=this;this.tap.play("tap"),cc.audioEngine.play(this.audioclip,!1,1);var e={type:-1,bird:null};try{this.itemList.forEach(function(i,n){if(!(n<2))throw new Error("break");var s=i.js.checkItem((new Date).getTime(),t.startTime),o=e.type;if(-1!==s&&(s<=o||-1===o)&&(e={type:s,bird:i.js,index:n}),1===n)throw new Error("break")})}catch(t){}var i=e,n=i.type,s=i.index,o=i.bird;if(-1!==n){if(!this.isStudying){var c=cc.instantiate(this.texts[n]);this.node.addChild(c)}4!==n&&(o.onClicked(),this.worm.playAdditive("wormactive"))}0===n?this.score+=200:1===n?this.score+=150:2===n?this.score+=120:3===n&&(this.score+=100),s&&this.itemList.splice(s,1),0!=this.itemList.length||this.isFinished||(this.isFinished=!0,setTimeout(function(){t.showResult(1)},200))},gameFailed:function(){this.stopMove()},showResult:function(t){var e=this;this.resultNode||(this.resultNode=cc.instantiate(this.result),this.node.addChild(this.resultNode,2)),this.resultNode.getComponent("result").init(80,t).then(function(){1===t?(e.isFinished=!0,e.resultNode=null,e.isStudying||(e.progressNum+=442,e.progress.node.width=e.progressNum),e.needGuide&&(e.isStudying=!e.isStudying,e.pause.active=!e.isStudying),e.createItem(),setTimeout(function(){e.startMove()},100)):(e.isFinished=!0,e.resultNode=null,e.isStudying=!1,e.pause.active=!0,e.createItem(),setTimeout(function(){e.startMove()},100))}).catch(function(){cc.director.loadScene("map")})},stopMove:function(){this.startTime=(new Date).getTime(),this.itemList.forEach(function(t){t.js.failed()}),this.showResult(2)},startMove:function(t){var e=this;this.isFinished&&(this.score=0,this.isFinished=!1,this.startTime=(new Date).getTime(),this.itemList.forEach(function(t){t.js.startMove(e.startTime)}),this.worm.play("worm"))},createItem:function(t){var e=this;this.itemList.forEach(function(t){t.node.removeFromParent()}),this.itemList=[];var i=[];this.config.json.forEach(function(t){i=i.concat(t.TimeNodes)}),(i=i.filter(function(t){return!t.Rest})).forEach(function(t){e.initMonster({type:-1,delay:t.BaseTime,center:-152.67})})},initMonster:function(t){var e=Math.floor(3*Math.random()),i=cc.instantiate(this.birds[e]);this.node.addChild(i);var n=i.getComponent("bird");t.node=i,t.js=n,this.itemList.push(t),n.init(t,200)},onPause:function(){var t=this;if(this.pauseStartTime>0){var e=(new Date).getTime();this.itemList.forEach(function(i){i.js.resume(e-t.pauseStartTime)}),this.pauseStartTime=0}else this.pauseStartTime=(new Date).getTime(),this.itemList.forEach(function(t){t.js.pause()})},update:function(t){var e=this;if(this.isStudying&&!this.isFinished){var i=(new Date).getTime()-this.startTime;try{this.itemList.forEach(function(t){if(Math.abs(t.delay-i)<=50&&-1==t.type)throw setTimeout(function(){e.onClicked()},0),new Error})}catch(t){}}}}),cc._RF.pop()},{}],map:[function(t,e,i){"use strict";cc._RF.push(e,"8e631rY6o5C5YaXhwgdCfq7","map"),cc.Class({extends:cc.Component,properties:{bird:cc.Animation},onLoad:function(){cc.director.preloadScene("game")},start:function(){var t=this;this.bird.on("finished",function(e){t.bird.play("yellowBirdAfter")}),this.bird.node.on("touchstart",function(){cc.director.loadScene("game")})}}),cc._RF.pop()},{}],result:[function(t,e,i){"use strict";cc._RF.push(e,"7421c00PRNNuLQYemvHl4CW","result"),cc.Class({extends:cc.Component,properties:{next:cc.Node,pre:cc.Node,pause:cc.Node,stars:[cc.Node]},ctot:function(){this.resolve=function(){},this.reject=function(){}},onLoad:function(){var t=this;this.node.active=!1,this.pause.active=!1,this.next.active=!1,this.pre.active=!1,this.stars.forEach(function(t){t.active=!1}),this.next.on("touchstart",function(){t.node.removeFromParent(),setTimeout(function(){t.resolve()},300)}),this.pre.on("touchstart",function(){t.node.removeFromParent(),setTimeout(function(){t.resolve()},300)}),this.pause.on("touchstart",function(){t.node.removeFromParent(),setTimeout(function(){t.reject()},300)})},init:function(t,e){var i=this;return this.node.active=!0,this.stars.forEach(function(t){t.active=!0}),this.pause.active=!1,this.next.active=!1,this.pre.active=!1,1===e?this.next.active=!0:(this.pause.active=!0,this.pre.active=!0),new Promise(function(t,e){i.resolve=t,i.reject=e})},start:function(){}}),cc._RF.pop()},{}],text:[function(t,e,i){"use strict";cc._RF.push(e,"b5010l08h9E05GB1zNokf6Q","text"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var t=this,e=this.node.getChildren()[0].getComponent(cc.Animation),i=e.getClips()[0].name;e.on("finished",function(){t.node.removeFromParent()}),e.play(i)},start:function(){}}),cc._RF.pop()},{}]},{},["bird","game","map","result","text"]);